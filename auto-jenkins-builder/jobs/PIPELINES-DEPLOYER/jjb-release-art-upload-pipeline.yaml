### JOBS ###
- job:
    name: jjb-build-ias-pipeline
    project-type: pipeline
    sandbox: true
    logrotate:
      numToKeep: 10
    parameters:
      - string:
          name: DEVOPS_BR
          default: '${DEFAULT_DEVOPS_BRANCH}'
      - string:
          name: DA_CPP_LIBS_BR
          default: '${DA_CPP_LIBS_BR}'
      - string:
          name: DA_CV_BR
          default: '${DA_CV_BR}'
      - choice:
          name: JOB_TYPE
          choices:
            - generic
            - generic_with_env
            - buildenv
            - scratch
          description: "generic: Build only app image (harbor.whirl.sg/ias/app)
                        generic_with_env: Build environment images and app image (harbor.whirl.sg/ias/app-deps, harbor.whirl.sg/ias/buildenv and harbor.whirl.sg/ias/app)
                        buildenv: Build only environment images (harbor.whirl.sg/ias/app-deps and harbor.whirl.sg/ias/buildenv)
                        scratch: Build app image based on dockerhub images (nvidia/cuda:8.0-cudnn5-devel as buildenv and nvidia/cuda:8.0-cudnn5-runtime as app image)"
    pipeline-scm:
      scm:
        - git:
            url: http://git-cache.dev.whirl.sg:9909/bitbucket.org/whirlsoftware/whirl_devops
            credentials-id: '87657576578657685'
            branches:
              -  '*/${DEVOPS_BR}'
      script-path: 'pipelines/ias/Jenkinsfile'


